$(function(){function e(){c<$(".home__titlebox-word").length-1&&(c++,$(".home__titlebox-word").eq(c).animate({left:0},200,e))}function t(){let e=parseInt(d.css("width"));e+10>=1120&&(n=4,b=5),e+10<1120&&e+10>=842.5&&(n=3,b=.5*(e/n-267.5)),e+10<842.5&&e+10>=545&&(n=2,b=.5*(e/n-267.5)),e+10<842.5&&e+10>=545&&(n=2,b=.5*(e/n-267.5)),e+10<545&&(n=1,b=.5*(e/n-267.5));let t=$(`.portfolio__item.category${r}`);d.css("height",`${210*Math.ceil(t.length/n)}px`),$(".portfolio__item").css("max-width",`calc(${100/n}% - ${2*b}px)`),$(`.portfolio__item.category${r}`).each((e,t)=>{let i=e%n,s=Math.trunc(e/n);$(t).css("left",`calc(${100*i/n}% + ${b}px`),$(t).css("top",`${200*s+5*(2*(s+1)-1)}px`)});let i=$(".about__description").innerHeight(),s=$(".header").innerHeight(),l=$(window).height(),a=l-s;if(i>a?($(".about").addClass("adaptive"),$(".about__description").addClass("adaptive")):($(".about").removeClass("adaptive"),$(".about__description").removeClass("adaptive")),$(window).innerWidth()>=900){let e=$(".services__title").innerHeight();$(".services__item-img").each(function(t,i){let s=$(".services__item-titlebox").eq(t).innerHeight(),a=$(".services__item-text").eq(t).innerHeight(),o=(l-e-30)/2-s-a-20;$(i).css("height",o+"px")})}if($(window).innerWidth()<900){$(".services__title").innerHeight();$(".services__item-img").each(function(e,t){$(".services__item-titlebox").eq(e).innerHeight(),$(".services__item-text").eq(e).innerHeight();$(t).css("height","auto")})}}function i(e,t){let i;switch(e){case 0:switch(t){case 0:i=600;break;case 1:i=800;break;case 2:i=1e3;break;case 3:i=1200}break;case 1:switch(t){case 0:i=500;break;case 1:i=650;break;case 2:i=800;break;case 3:i=1e3}break;case 2:switch(t){case 0:i=500;break;case 1:i=600;break;case 2:i=700;break;case 3:i=800}break;case 3:switch(t){case 0:i=900;break;case 1:i=1200;break;case 2:i=1500;break;case 3:i=1800}break;case 4:switch(t){case 0:i=700;break;case 1:i=900;break;case 2:i=1200;break;case 3:i=1400}}$(".final-price-value span:first").text(i)}$(".header__logo").on("mouseenter",()=>{$(".header__logohover").addClass("show")}),$(".header__logo").on("mouseleave",()=>{$(".header__logohover").removeClass("show")}),$(".header__menu-item").on("click",function(){if(!$(this).hasClass("header__menu-item-selected")){let e=$(".header__menu-item").index($(this));$(".header__menu-item").each((t,i)=>{t===e?($(i).addClass("header__menu-item-selected"),$(i).removeClass("header__menu-item-notSelected")):$(i).addClass("header__menu-item-selected")&&($(i).removeClass("header__menu-item-selected"),$(i).addClass("header__menu-item-notSelected"))})}s.toggleClass("active"),l.toggleClass("active")});let s=$(".header__burger"),l=$(".header__menu"),a=$("body");s.on("click",function(){s.toggleClass("active"),l.toggleClass("active"),a.toggleClass("lock")}),$(".jump-top").on("click",()=>{window.scrollTo(0,0),$(".header__menu-item").each((e,t)=>{0==e?($(t).addClass("header__menu-item-selected"),$(t).removeClass("header__menu-item-notSelected")):($(t).removeClass("header__menu-item-selected"),$(t).addClass("header__menu-item-notSelected"))})}),$(window).on("scroll",function(){pageYOffset>0?$(".jump-top").css("display","block"):$(".jump-top").css("display","none")});let o=document.querySelectorAll(".home__slider-item");for(let e=0;e<o.length;e++)o[e].style.zIndex=-(e+1);for(let e=0;e<o.length;e++){let t;t=e<o.length-1?e+1:0,o[e].addEventListener("transitionend",i=>{"6"==i.elapsedTime&&(o[e].classList.remove("anim1"),o[e].classList.add("anim2"),o[t].classList.add("anim1")),"opacity"==i.propertyName&&(o[e].style.zIndex=o[e].style.zIndex-o.length,o[e].classList.remove("anim2"))})}o[0].classList.add("anim1");let c=-1;e(-1);let r=0,n=4,m=$(".portfolio__menu-item"),d=$(".portfolio__items"),_=$(".portfolio__item");d.css("height",`${210*Math.ceil(_.length/4)}px`),m.on("click",function(){parseInt($(".portfolio").css("width"))<900&&(g.toggleClass("active"),v.toggleClass("active"));let e=m.index($(this)),t=["","...уличные зонты","...складское оборудование","...оборудование для уличной торговли","...рендеринг и визуализация","...параметризация"];if($(".portfolio__title-text span:last-child").text(t[e]),e!==r){$(this).addClass("active"),m.eq(r).removeClass("active");let t=$(`.portfolio__item.category${r}`),i=$(`.portfolio__item.category${e}`);d.animate({height:`${210*Math.ceil(i.length/n)}px`},500),_.each((e,s)=>{let l=t.index($(s)),a=i.index($(s));if(l>-1&&-1==a&&$(s).animate({opacity:"0"},500,function(){$(s).css("display","none"),$(s).css("left","-100%")}),-1==l&&a>-1){let e=a%n,t=Math.trunc(a/n);$(s).css("display","block"),$(s).css("left",`calc(${e*(100/n)}% + ${b}px`),$(s).css("top",`${200*t+5*(2*(t+1)-1)}px`),$(s).css("opacity","1")}if(l>-1&&a>-1){let e=a%n,t=Math.trunc(a/n);$(s).css("left",`calc(${e*(100/n)}% + ${b}px`),$(s).css("top",`${200*t+5*(2*(t+1)-1)}px`)}}),r=e}});let f,h,p,g=$(".portfolio__burger"),v=$(".portfolio__menu"),u=$(".portfolio__menu-inner");g.on("click",function(){let e=u.css("height"),t=v.css("height");g.toggleClass("active"),v.toggleClass("active");parseInt(t)}),$(".portfolio__item-hover-button").on("click",function(){f=$(this).parent().parent().attr("id").match(/\d+/g),$(".portfolio__modal").append('<div class="" id="modalSliderNew"></div>'),h=$("#modalSliderNew"),$(`#pms${f} img`).each((e,t)=>{h.append(`<img src="img/prtf/${f}/${e}.jpg" alt="">`)}),1==$(`#pms${f} img`).length&&$("#modalSliderNew img").addClass("only"),$(`#pms${f} img`).length>1&&h.SegmentSlider({segments:8,lineDur:3e3,segmentDur:500,linePosition:"bottom",lineHeight:"5px",lineColor:"red",lineOpacity:1}),a.toggleClass("lock"),$(".portfolio__modal").animate({left:"0"},400),$("#modalSliderNew").addClass("active")}),$(".about__achievements-item").on("click",function(){$this=$(this),p=$(this).attr("id").match(/\d+/g)[0],$(".portfolio__modal").append('<div class="" id="modalSliderNew"></div>'),h=$("#modalSliderNew"),h.append("<img class='only' alt=\"\">"),sliderNewImg=$("#modalSliderNew img");let e=new Promise(function(e,t){$this.addClass("load"),sliderNewImg.attr("src",`img/about/${p}.jpg`),sliderNewImg.on("load",function(){e()})});e.then(function(){$this.removeClass("load"),a.toggleClass("lock"),$(".portfolio__modal").animate({left:"0"},400),$("#modalSliderNew").addClass("active")})}),$(".portfolio__modal-close").on("click",function(){h&&h.removeClass("active"),$(".portfolio__modal").animate({left:"-100%"},500,function(){h&&h.remove(),$(".segment-slider-wrapper-outer").remove(),a.toggleClass("lock")})});let b,w=$(window).height(),C=$(".services__title").innerHeight();$(".services__item-img").each(function(e,t){let i=$(".services__item-titlebox").eq(e).innerHeight(),s=$(".services__item-text").eq(e).innerHeight(),l=(w-C-30)/2-i-s-20;$(t).css("height",l+"px")}),$(".services__item-img2").css("width",$(".services__item-img2").innerHeight()+"px"),t(),$(window).resize(t);let q,x=$(".services__item-img.services__item-img0 img"),k=0;x.css("opacity","0"),x.eq(k).css("opacity","1"),setInterval(function(){let e=8===k?0:k+1;x.eq(k).css("opacity","0"),x.eq(e).css("opacity","1"),k=e},1e3);let y,S=0;$(".services__item-img2 img").eq(S).css("opacity","1"),$(".services__item-img2").on("mouseenter",function(e){$(".services__item-img2 img").css("opacity","0"),$(".services__item-img2 img").eq(0).css("opacity","1"),q=e.pageX}),$(".services__item-img2").on("mousemove",function(e){let t=e.pageX,i=$(".services__item-img2").innerHeight()/36;y=Math.floor((t-q)/i),y!==S&&(y>=0?($(".services__item-img2 img").eq(S%36).css("opacity","0"),$(".services__item-img2 img").eq(y%36).css("opacity","1")):($(".services__item-img2 img").eq((35+S)%36).css("opacity","0"),$(".services__item-img2 img").eq((35+y)%36).css("opacity","1")),S=y)}),$(".services__item-img3").on("click",function(){let e=$(this);e.addClass("load"),$(".portfolio__modal").append('<div class="" id="modalSliderNew"></div>'),h=$("#modalSliderNew");for(let e=0;e<4;e++)h.append(`<img src="img/services/3/${e}.jpg" alt="">`);let t=[];for(let e=0;e<4;e++)t[e]=new Promise(function(t,i){$("#modalSliderNew img").eq(e).attr("src",`img/services/3/${e}.jpg`),$("#modalSliderNew img").eq(e).on("load",function(){t()})});let i=Promise.all([t[0],t[1],t[2],t[3]]);i.then(function(t){e.removeClass("load"),h.SegmentSlider({segments:8,lineDur:3e3,segmentDur:500,linePosition:"bottom",lineHeight:"5px",lineColor:"red",lineOpacity:1}),a.toggleClass("lock"),$(".portfolio__modal").animate({left:"0"},400),$("#modalSliderNew").addClass("active")})});let N=0;$(".labels1 .label").eq(N).addClass("active");let H=$("#ball1"),I=5+$(".switch1 .circle:first").offset().left,j=5+$(".switch1 .circle:first").offset().top;H.offset({top:j,left:I}),$(".switch1 .circle").on("click",function(){let e=$(".switch1 .circle").index($(this));$(".labels1 .label").eq(N).removeClass("active"),$(".labels1 .label").eq(e).addClass("active"),H.offset({top:5+$(this).offset().top,left:5+$(this).offset().left}),0!==M&&($(".labels2 .label").eq(M).removeClass("active"),$(".labels2 .label").eq(0).addClass("active"),L.offset({top:5+$($(".switch2 .circle").eq(0)).offset().top,left:5+$($(".switch2 .circle").eq(0)).offset().left}),M=0),N=e,i(N,M)}),$(".prices__items-part-left .labels1 .label").on("click",function(){let e=$(".prices__items-part-left .labels1 .label").index($(this));$(".prices__items-part-left .labels1 .label").eq(N).removeClass("active"),$(".prices__items-part-left .labels1 .label").eq(e).addClass("active"),H.offset({top:5+$(".prices__items-part-left .switch1 .circle").eq(e).offset().top,left:5+$(".prices__items-part-left .switch1 .circle").eq(e).offset().left}),0!==M&&($(".labels2 .label").eq(M).removeClass("active"),$(".labels2 .label").eq(0).addClass("active"),L.offset({top:5+$($(".switch2 .circle").eq(0)).offset().top,left:5+$($(".switch2 .circle").eq(0)).offset().left}),M=0),N=e,i(N,M)}),$(".prices__items-part-left .switch1 .circle").on("mouseenter",function(){let e=$(".prices__items-part-left .switch1 .circle").index($(this));$(".prices__items-part-left .labels1 .label").eq(e).addClass("hover")}),$(".prices__items-part-left .switch1 .circle").on("mouseleave",function(){let e=$(".prices__items-part-left .switch1 .circle").index($(this));$(".prices__items-part-left .labels1 .label").eq(e).removeClass("hover")});let M=0;$(".labels2 .label").eq(M).addClass("active");let L=$("#ball2");L.offset({top:5+$(".switch2 .circle:first").offset().top,left:5+$(".switch2 .circle:first").offset().left}),$(".switch2 .circle").on("click",function(){let e=$(".switch2 .circle").index($(this));$(".labels2 .label").eq(M).removeClass("active"),$(".labels2 .label").eq(e).addClass("active"),L.offset({top:5+$(this).offset().top,left:5+$(this).offset().left}),M=e,i(N,M)}),$(".labels2 .label").on("click",function(){let e=$(".labels2 .label").index($(this));$(".labels2 .label").eq(M).removeClass("active"),$(".labels2 .label").eq(e).addClass("active"),L.offset({top:5+$(".switch2 .circle").eq(e).offset().top,left:5+$(".switch2 .circle").eq(e).offset().left}),M=e,i(N,M)}),$(".switch2 .circle").on("mouseenter",function(){let e=$(".switch2 .circle").index($(this));$(".labels2 .label").eq(e).addClass("hover")}),$(".switch2 .circle").on("mouseleave",function(){let e=$(".switch2 .circle").index($(this));$(".labels2 .label").eq(e).removeClass("hover")}),i(N,M)});